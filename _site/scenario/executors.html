<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <header class="page-header" role="banner">
      <a href="/">
      <h1 class="project-name">BugHuntr.io Devdocs</h1>
      <h2 class="project-tagline"></h2>
      </a>
    </header>
    <main id="content" class="main-content" role="main">
      <div class="subpage">
  <div class="header">
    <a href="/">Back to index</a>
  </div>

  <div class="content">
    <h2 id="metadata---executors">Metadata - Executors</h2>

<p>Executors are responsible for executing scenario <a href="/scenario/commands.html">commands</a>. There are currently two executors <code class="highlighter-rouge">docker</code> and <code class="highlighter-rouge">qemu</code>, each with their own configuration.</p>

<p>The choice of executor should be specified in the <code class="highlighter-rouge">executor.type</code> key, for example to select the <code class="highlighter-rouge">docker</code> executor use:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">executor</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">docker</span>
</code></pre></div></div>

<h3 id="docker-executor">Docker executor</h3>

<p>The docker executor executes OCI container images via Docker, this executor should be sufficient for 90% of use cases. It is fast to set up and can accommodate complex multiple container scenarios easily.</p>

<p>For security reasons, the Docker executor has certain limitations. Containers cannot be executed in a way that could lead to compromise of the executor host. So privileged containers are not permitted, and certain limitations are placed on container configurations (see <a href="/scenario/commands.html">commands</a> for further details).</p>

<h4 id="configuration">Configuration</h4>

<p>Executor configuration should be specified under the <code class="highlighter-rouge">executor.conf</code> key, with the following options:</p>

<ul>
  <li><code class="highlighter-rouge">ram</code> <em>int</em> Default ram limit for created containers
    <ul>
      <li>The total RAM used by the scenario should not exceed 512MiB</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">flags</code> <em>dict -&gt; string[]</em> Map of container names to an array of flag names, used for mounting flags into named containers automatically.</li>
</ul>

<p>The <code class="highlighter-rouge">flags</code> configuration is required to specify which container to map a named flag into. For example, to place a flag called <code class="highlighter-rouge">Root</code> into a container called <code class="highlighter-rouge">webserver</code> at <code class="highlighter-rouge">/root_flag</code> the following configuration should be used:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">executor</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">docker</span>
  <span class="na">conf</span><span class="pi">:</span>
    <span class="na">flags</span><span class="pi">:</span>
      <span class="na">webserver</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">Root</span>
<span class="na">conf</span><span class="pi">:</span>
  <span class="na">flags</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">file</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">Root</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/root_flag</span>
</code></pre></div></div>

<h3 id="qemu-executor">QEMU executor</h3>

<p>The QEMU executor runs scenario commands in the virtual machine, using a specified container image as the root filesystem. The QEMU executor should be used when the privileges provided by the Docker executor are not sufficient, or when a more exotic scenario is planned.</p>

<h4 id="configuration-1">Configuration</h4>

<p>Executor configuration should be specified under the <code class="highlighter-rouge">executor.conf</code> key, with the following options:</p>

<ul>
  <li><code class="highlighter-rouge">ram</code> <em>int</em> Default ram limit for created containers
    <ul>
      <li>The total RAM used by the scenario should not exceed 512MiB</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">image</code> <em>string</em> The container repository URL of an image to use as the root filesystem of the virtual machine</li>
  <li><code class="highlighter-rouge">args</code> <em>string[]</em> The command to run as PID 1 in the image. If supplied overwrites the image defined  <code class="highlighter-rouge">Entrypoint</code> and <code class="highlighter-rouge">Cmd</code></li>
  <li><code class="highlighter-rouge">env</code> <em>string[]</em> Environment variables to pass into the image. If supplied overwrites the image defined <code class="highlighter-rouge">ENV</code></li>
</ul>

<p><strong>Note:</strong> The entrypoint and cmd configured in the specified image will execute as PID 1 when the virtual machine starts up.</p>

<p>For example, to use the BusyBox container image from docker.io as the root filesystem for a QEMU scenario use:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">executor</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">qemu</span>
  <span class="na">conf</span><span class="pi">:</span>
    <span class="na">ram</span><span class="pi">:</span> <span class="m">256</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.io/library/busybox:latest</span>
</code></pre></div></div>

<p>Unlike the docker executor, there is no automatic handling of flags in the QEMU executor. Flags will simply be copied into the root filesystem of the virtual machine.</p>

  </div>

  <div class="footer">
    <a href="/">Back to index</a>
  </div>
</div>



      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
